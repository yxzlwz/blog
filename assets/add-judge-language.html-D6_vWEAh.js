import{_ as i,c as a,a as n,o as e}from"./app-Tf8BuBYq.js";const t={};function l(h,s){return e(),a("div",null,[...s[0]||(s[0]=[n(`<p>评测语言的添加涉及三个位置：前端站点管理中添加语言，后端<code>oj_submission/models.py</code>中的<code>LanguageChoices</code>，以及评测端的<code>languages.py</code>。</p><h2 id="前端" tabindex="-1"><a class="header-anchor" href="#前端"><span>前端</span></a></h2><p>登陆管理员账号，鼠标移至右上角用户名处，在下拉菜单中选择站点设置，并修改评测语言一项。</p><h2 id="后端" tabindex="-1"><a class="header-anchor" href="#后端"><span>后端</span></a></h2><p>在<code>LanguageChoices</code>中添加一项属性，属性变量名建议与前端使用的键相同，值为一个二元元组，第一项务必与前端<code>languages</code>中使用的键相同，第二项为后端展示时使用的值，也建议与前端相同。</p><p>添加完后需要执行<code>python3 manage.py makemigrations</code>和 <code>python3 manage.py migrate</code>。<strong>如果是更新生产环境，记得先设置环境变量再执行上述命令，以保证数据更新到生产数据库。</strong></p><h2 id="评测端" tabindex="-1"><a class="header-anchor" href="#评测端"><span>评测端</span></a></h2><p>首先确保系统上安装有对应语言的编译和运行环境。</p><p>在<code>languages.py</code>中添加对应语言的编译和运行参数，具体可参考 <a href="https://github.com/QingdaoU/JudgeServer/blob/master/client/Python/languages.py" target="_blank" rel="noopener noreferrer">@QingdaoU 的实现</a>。</p><p>特别说明的是，即使该语言不需要编译（例如 JavaScript），也需要填写<code>src_name</code>，此处给出一个示例：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">javascript</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">compile</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">src_name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">solution.js</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">exe_name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">solution.js</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">compile_command</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> None</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        },</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">        &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">run</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">command</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node </span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">{exe_path}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">seccomp_rule</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">general</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">            &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">env</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> DEFAULT_ENV</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        },</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（真的就给个例子，这个例子我没试过，出事别怪我（））</p><p>（另记得评测端和 Celery 都没有热重载，写完代码需要手动重启，可别和我一样被这个忽悠了）</p><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>事实上，对于 C、C++ 等语言，<code>seccomp_rule</code>一项应使用特殊配置文件。然而经过我们测试，使用其它配置文件都会导致评测时莫名 RE，故目前统一使用 general。如果你知道该问题的解决方案，请您与我们联系。</p></div>`,14)])])}const k=i(t,[["render",l]]),d=JSON.parse('{"path":"/genuine-oj/add-judge-language.html","title":"添加评测语言","lang":"zh-CN","frontmatter":{"title":"添加评测语言","date":"2023-06-17T17:34:24.000Z","description":"评测语言的添加涉及三个位置：前端站点管理中添加语言，后端oj_submission/models.py中的LanguageChoices，以及评测端的languages.py。 前端 登陆管理员账号，鼠标移至右上角用户名处，在下拉菜单中选择站点设置，并修改评测语言一项。 后端 在LanguageChoices中添加一项属性，属性变量名建议与前端使用的键...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"添加评测语言\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-06-17T17:34:24.000Z\\",\\"dateModified\\":\\"2025-11-13T07:27:51.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://yxzl.dev/genuine-oj/add-judge-language.html"}],["meta",{"property":"og:site_name","content":"异想之旅のBlog"}],["meta",{"property":"og:title","content":"添加评测语言"}],["meta",{"property":"og:description","content":"评测语言的添加涉及三个位置：前端站点管理中添加语言，后端oj_submission/models.py中的LanguageChoices，以及评测端的languages.py。 前端 登陆管理员账号，鼠标移至右上角用户名处，在下拉菜单中选择站点设置，并修改评测语言一项。 后端 在LanguageChoices中添加一项属性，属性变量名建议与前端使用的键..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-13T07:27:51.000Z"}],["meta",{"property":"article:published_time","content":"2023-06-17T17:34:24.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-13T07:27:51.000Z"}]]},"git":{"createdTime":1763018871000,"updatedTime":1763018871000},"autoDesc":true,"filePathRelative":"genuine-oj/add-judge-language.md","headers":[]}');export{k as comp,d as data};

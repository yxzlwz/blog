import{_ as e,c as n,a as t,o}from"./app-Boikxu3H.js";const i="/assets/51bbcf870f75321efa8a9f8afb0734c1-ivCHmPCi.png",s={};function c(h,a){return o(),n("div",null,[...a[0]||(a[0]=[t('<p>本文件针对 <code>.../WeChat Files/wxid_xxxxxxxx/Msg</code>下的各个文件解密后的内容进行概述。</p><p>未作特别说明的情况下，“聊天记录数据”指代的数据结构上都和<code>Multi</code>文件夹中的完整聊天记录数据相同或类似。</p><p>本文默认你已经获取并且解密了 SQLite 文件，关于这一步的具体方法，详见：<a href="https://blog.csdn.net/weixin_44495599/article/details/130030309" target="_blank" rel="noopener noreferrer">微信PC端数据库文件解密_异想之旅的博客-CSDN博客</a></p><p>关于 Multi 文件夹内的数据库详见：<a href="https://blog.csdn.net/weixin_44495599/article/details/130163338" target="_blank" rel="noopener noreferrer">微信PC端各个数据库文件结构与功能简述 - Multi文件夹_异想之旅的博客-CSDN博客</a></p><h2 id="微信小程序相关" tabindex="-1"><a class="header-anchor" href="#微信小程序相关"><span>微信小程序相关</span></a></h2><h3 id="applet" tabindex="-1"><a class="header-anchor" href="#applet"><span>Applet</span></a></h3><p>微信小程序的相关数据，包括但不限于：</p><ul><li>你使用过的小程序<code>RecentWxApp</code></li><li>星标的小程序<code>StarWxApp</code></li><li>各个小程序的基本信息<code>WAContact</code></li></ul><p>意义不大。</p><h2 id="企业微信相关" tabindex="-1"><a class="header-anchor" href="#企业微信相关"><span>企业微信相关</span></a></h2><h3 id="bizchat" tabindex="-1"><a class="header-anchor" href="#bizchat"><span>BizChat</span></a></h3><p>企业微信联系人数据，包括但不限于：</p><ul><li>在微信中可以访问的企业微信会话<code>ChatInfo</code></li><li>一部分会话的信息<code>ChatSession</code>（未确认与<code>ChatInfo</code>的关系；这其中的<code>Content</code>字段是最近一条消息，疑似用于缓存展示的内容）</li><li>包括群聊在内的聊天涉及的所有企业微信用户身份信息<code>UsrInfo</code></li><li>该微信账号绑定的企业微信身份<code>MyUsrInfo</code></li></ul><p>特别说明的是，我目前还没有详细查证，这其中的聊天是否包含使用普通微信身份与企业微信用户发起的聊天，还是只包含使用绑定到普通微信的企业微信身份与其它企业微信身份发起的聊天。</p><h3 id="bizchatmsg" tabindex="-1"><a class="header-anchor" href="#bizchatmsg"><span>BizChatMsg</span></a></h3><p>企业微信聊天记录数据，包括所有和企业微信。</p><p>与<code>BizChat</code>一样，我还没有确定涉及的范围究竟是只有企业微信-企业微信还是同时包含普通微信-企业微信。</p><p>另外，此处的消息与<code>Multi</code>文件夹中真正的微信消息不同的是在于没有拆分数据库。</p><h3 id="openim-前缀" tabindex="-1"><a class="header-anchor" href="#openim-前缀"><span>OpenIM 前缀</span></a></h3><p>这个也是企业微信的数据，包括联系人、企业信息、与企业微信联系人的消息等。</p><p>简单看了一下，觉得应该这个是普通微信-企业微信的数据，上面<code>biz</code>前缀的是企业微信-企业微信</p><p>这个不常用，而且也没有全新的数据结构，不再详细说了。</p><h3 id="publicmsg" tabindex="-1"><a class="header-anchor" href="#publicmsg"><span>PublicMsg</span></a></h3><p>看起来像是企业微信的通知消息，你也可以理解为企业微信的企业应用消息</p><h2 id="微信功能相关" tabindex="-1"><a class="header-anchor" href="#微信功能相关"><span>微信功能相关</span></a></h2><h3 id="emotion" tabindex="-1"><a class="header-anchor" href="#emotion"><span>Emotion</span></a></h3><p>顾名思义表情包相关，包括但不限于以下内容：</p><ul><li>CustomEmotion：顾名思义用户手动上传的GIF表情，包含下载链接，不过看起来似乎有加密（内有<code>aesKey</code>字段但我没测试）</li><li>EmotionDes1 和 EmotionItem 应该也是类似的内容，没仔细研究</li><li>EmotionPackageItem：账号添加的表情包的<strong>集合</strong>列表（从商店下载的那种）</li></ul><p>顺便吐槽一句，微信这些地方居然使用 http 而非 https</p><h3 id="favorite" tabindex="-1"><a class="header-anchor" href="#favorite"><span>Favorite</span></a></h3><p>顾名思义收藏的内容相关，包括但不限于：</p><ul><li>FavItems：收藏的消息条目列表</li><li>FavDataItem：收藏的具体数据。没有自习去看他的存储逻辑，不过大概可以确定以下两点 <ul><li>即使只是简单收藏一篇公众号文章也会在 FavDataItem 中有一个对应的记录</li><li>对于收藏的合并转发类型的消息，合并转发中的每一条消息在 FavDataItem 中都是一个独立的记录</li></ul></li><li>FavTags：为收藏内容添加的标签</li></ul><h3 id="misc" tabindex="-1"><a class="header-anchor" href="#misc"><span>Misc</span></a></h3><p>有<code>BizContactHeadImg</code>和<code>ContactHeadImg1</code>两张表，应该是二进制格式的各个头像</p><h3 id="sns" tabindex="-1"><a class="header-anchor" href="#sns"><span>Sns</span></a></h3><p>微信朋友圈的相关数据：</p><ul><li>FeedsV20：朋友圈的XML数据</li><li>CommentV20：朋友圈点赞或评论记录</li><li>NotificationV7：朋友圈通知</li><li>SnsConfigV20：一些配置信息，能读懂的是其中有你的朋友圈背景图</li><li>SnsGroupInfoV5：猜测是旧版微信朋友圈可见范围的可见或不可见名单</li></ul><h2 id="fts-搜索" tabindex="-1"><a class="header-anchor" href="#fts-搜索"><span>FTS（搜索）</span></a></h2><p>问了问 ChatGPT 并经过一点简单的尝试，我暂且认定前缀为 FTS 的数据库可能都和全文搜索（Full-Text Search）相关。</p><h3 id="ftscontact" tabindex="-1"><a class="header-anchor" href="#ftscontact"><span>FTSContact</span></a></h3><p>有一堆表，我能读懂的有 <code>FTSChatroom15_content</code> 和 <code>FTSContact15_content</code> 两个，分别对应的是微信“聊天”界面会展示的消息会话（包括公众号等）和“联系人”界面会出现的所有人（有的时候并不是所有联系人都会出现在“聊天”中），信息包含昵称、备注名和微信号，也和微信支持搜索的字段相匹配。</p><h3 id="ftsfavorite" tabindex="-1"><a class="header-anchor" href="#ftsfavorite"><span>FTSFavorite</span></a></h3><p>搜索收藏内容的索引，还是只能看懂 <code>FavData1_content</code>，不过那些看不懂的表也是和上面 FTSContact 存在的表命名方式一样。</p><p>还发现有意思的一点：对于收藏内容通过文字搜索，电脑版是把所有东西拼接成一个超长字符串来实现的。这对于文本、链接等没啥问题，但是对于合并转发消息，就会出现搜索 <code>[图片]</code> 这一关键词可以生效的奇怪事情。</p><h3 id="ftsmsg" tabindex="-1"><a class="header-anchor" href="#ftsmsg"><span>FTSMsg</span></a></h3><p>按照名字，这应该是用来搜索聊天记录的。然而显然他不可能把所有的聊天记录索引，打开之后<code>FTSChatMsg2_content</code>表中也只有几百条数据，暂且认为这个也没用吧。</p><h3 id="multisearchchatmsg" tabindex="-1"><a class="header-anchor" href="#multisearchchatmsg"><span>MultiSearchChatMsg</span></a></h3><p>这个数据库前缀不一样，但是看内容和结构应该还是一个搜索相关，搜索的是聊天记录中的文件，这里存储了文件名和其所在的聊天。不过<code>FTSMsgSearch18_content</code>和<code>SessionAttachInfo</code>两张表记录数量有显著差异，不确定是哪个少了或是怎样。</p><h2 id="hardlink-文件在磁盘存储的位置" tabindex="-1"><a class="header-anchor" href="#hardlink-文件在磁盘存储的位置"><span>HardLink（文件在磁盘存储的位置）</span></a></h2><p>将文件/图片/视频的文件名指向保存它们的文件夹名称（例如2023-04），有用但不多。</p><h2 id="micromsg-核心之一" tabindex="-1"><a class="header-anchor" href="#micromsg-核心之一"><span>MicroMsg（核心之一）</span></a></h2><p>严格来说这只是一个数据库，不应该和分类平级，但是我认为这是分析到目前以来最核心的，因此单独来说了。</p><h3 id="appinfo" tabindex="-1"><a class="header-anchor" href="#appinfo"><span>AppInfo</span></a></h3><p>一些软件的介绍，猜测可能是关于某些直接从手机APP跳转到微信的转发会带有的转发来源小尾巴的信息</p><h3 id="biz-前缀" tabindex="-1"><a class="header-anchor" href="#biz-前缀"><span>Biz 前缀</span></a></h3><p>与公众号相关的内容，应该主要是账号本身相关。</p><p>能确定的是 BizSessionNewFeeds 这张表保存的是订阅号大分类底下的会话信息，包括头像、最近一条推送等。</p><h3 id="chatinfo" tabindex="-1"><a class="header-anchor" href="#chatinfo"><span>ChatInfo</span></a></h3><p>保存“聊天”列表中每个会话最后一次标记已读的时间</p><h3 id="chatroom-和-chatroominfo" tabindex="-1"><a class="header-anchor" href="#chatroom-和-chatroominfo"><span>ChatRoom 和 ChatRoomInfo</span></a></h3><p>存储群聊相关信息</p><ul><li>ChatRoom：存储每个群聊的用户列表（包括微信号列表和群昵称列表）和个人群昵称等信息</li><li>ChatRoomInfo：群聊相关信息，主要是群公告内容，与成员无关</li></ul><p>顺便再吐槽一下，微信这个位置有一个命名出现异常的，别的表前缀都是<code>ChatRoom</code>，而突然出现一个<code>ChatroomTool</code></p><h3 id="contact" tabindex="-1"><a class="header-anchor" href="#contact"><span>Contact</span></a></h3><p>顾名思义，联系人。不过这里的联系人并不是指你的好友，而是所有你可能看见的人，除好友外还有所有群聊中的所有陌生人。</p><ul><li>Contact：这张表存储的是用户基本信息，包括但不限于微信号（没有好友的陌生人也能看！）、昵称、备注名、设置的标签等等，甚至还有生成的各种字段的拼音，可能是用于方便搜索的吧</li><li>ContactHeadImgUrl：头像地址</li><li>ContactLabel：好友标签 ID 与名称对照</li></ul><h3 id="patinfo" tabindex="-1"><a class="header-anchor" href="#patinfo"><span>PatInfo</span></a></h3><p>存了一部分好友的拍一拍后缀，但是只有几个，我记得我电脑上显示过的拍一拍似乎没有这么少？</p><h3 id="session" tabindex="-1"><a class="header-anchor" href="#session"><span>Session</span></a></h3><p><strong>真正的</strong>“聊天”栏目显示的会话列表，一个不多一个不少，包括“折叠的群聊”这样子的特殊会话；信息包括名称、未读消息数、最近一条消息等</p><h3 id="ticketinfo" tabindex="-1"><a class="header-anchor" href="#ticketinfo"><span>TicketInfo</span></a></h3><p>这张表在我这里有百余条数据，但是我实在没搞明白它是什么</p><h2 id="未能确定分类或内容的" tabindex="-1"><a class="header-anchor" href="#未能确定分类或内容的"><span>未能确定分类或内容的</span></a></h2><h3 id="chatmsg" tabindex="-1"><a class="header-anchor" href="#chatmsg"><span>ChatMsg</span></a></h3><p>该数据库包含多个表，然而大多数都是空白的。有明确内容的表主要包括以下：</p><ul><li>ChatCRMsg：一部分聊天记录数据，没看明白究竟是符合什么条件的消息包含在里面</li><li>DelSessionInfo：被删除的好友列表（猜测可能聊天记录仍保留在本地？）</li><li>Name2ID_v1：ChatCRMsg的辅助数据表</li></ul><p>补充：有评论区大佬指路如下，本人没有那段时间的数据无法验证，具体请自行判断</p><figure><img src="'+i+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="clientconfig" tabindex="-1"><a class="header-anchor" href="#clientconfig"><span>ClientConfig</span></a></h3><p>根据名字猜测是客户端配置信息，然而其内部只有<code>Config</code>和<code>MmExptAppItem</code>两张表且内容都很短（小于10行），无法确定其实际作用。</p><h3 id="customerservice" tabindex="-1"><a class="header-anchor" href="#customerservice"><span>CustomerService</span></a></h3><p>本人打开时这里面没有任何有效数据，表包括<code>ChatCRMsg</code> <code>Name2ID</code> <code>Session</code> <code>TransCRTable</code>四张，猜测可能是微信小程序等的客服聊天相关内容。</p><h3 id="functionmsg" tabindex="-1"><a class="header-anchor" href="#functionmsg"><span>FunctionMsg</span></a></h3><p>在我这里这个东西两张表只有一行有效数据，根据名称猜测这是公众号或小程序创建的一些奇怪聊天。</p><h3 id="syncmsg" tabindex="-1"><a class="header-anchor" href="#syncmsg"><span>SyncMsg</span></a></h3><p>其中有一个名为<code>UnSupportedMsg</code>的表，猜测内容是电脑端不支持的消息（例如微信红包等等），记录在这里以保证本地数据完整</p><h2 id="未能分析出任何有效信息的" tabindex="-1"><a class="header-anchor" href="#未能分析出任何有效信息的"><span>未能分析出任何有效信息的</span></a></h2><h3 id="imagetranslate" tabindex="-1"><a class="header-anchor" href="#imagetranslate"><span>ImageTranslate</span></a></h3><p>只有一张表<code>ImageTranslateCache</code>，在我这里其内部没有任何数据</p><h3 id="linkhistory" tabindex="-1"><a class="header-anchor" href="#linkhistory"><span>LinkHistory</span></a></h3><p>只有一张表<code>LinkHistory</code>，在我这里其内部没有任何数据</p><h3 id="media" tabindex="-1"><a class="header-anchor" href="#media"><span>Media</span></a></h3><p>只有两张表<code>ChatCRVoice</code>和<code>MediaInfo</code>，在我这里其内部没有任何数据</p><p>评论区有大佬说这是 ChatMsg 的语音信息</p><h3 id="predownload" tabindex="-1"><a class="header-anchor" href="#predownload"><span>PreDownload</span></a></h3><h3 id="voip" tabindex="-1"><a class="header-anchor" href="#voip"><span>Voip</span></a></h3><p>应该是海外微信的 Voip 通话功能，和我们没关系</p><h3 id="xinfo" tabindex="-1"><a class="header-anchor" href="#xinfo"><span>xInfo</span></a></h3><p>该数据库文件没有加密，可直接读取。</p><p>该文件主要字段为二进制字符串，无法分析。</p>',100)])])}const d=e(s,[["render",c]]),r=JSON.parse('{"path":"/article/sjwtillu/","title":"微信PC端各个数据库文件结构与功能简述 - 根目录","lang":"zh-CN","frontmatter":{"title":"微信PC端各个数据库文件结构与功能简述 - 根目录","createTime":"2023/05/12 13:13:10","permalink":"/article/sjwtillu/","description":"本文件针对 .../WeChat Files/wxid_xxxxxxxx/Msg下的各个文件解密后的内容进行概述。 未作特别说明的情况下，“聊天记录数据”指代的数据结构上都和Multi文件夹中的完整聊天记录数据相同或类似。 本文默认你已经获取并且解密了 SQLite 文件，关于这一步的具体方法，详见：微信PC端数据库文件解密_异想之旅的博客-CSDN博...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"微信PC端各个数据库文件结构与功能简述 - 根目录\\",\\"image\\":[\\"https://yxzl.dev/images/51bbcf870f75321efa8a9f8afb0734c1.png\\"],\\"dateModified\\":\\"2025-10-10T04:50:50.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://yxzl.dev/article/sjwtillu/"}],["meta",{"property":"og:site_name","content":"异想之旅のBlog"}],["meta",{"property":"og:title","content":"微信PC端各个数据库文件结构与功能简述 - 根目录"}],["meta",{"property":"og:description","content":"本文件针对 .../WeChat Files/wxid_xxxxxxxx/Msg下的各个文件解密后的内容进行概述。 未作特别说明的情况下，“聊天记录数据”指代的数据结构上都和Multi文件夹中的完整聊天记录数据相同或类似。 本文默认你已经获取并且解密了 SQLite 文件，关于这一步的具体方法，详见：微信PC端数据库文件解密_异想之旅的博客-CSDN博..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://yxzl.dev/images/51bbcf870f75321efa8a9f8afb0734c1.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-10-10T04:50:50.000Z"}],["meta",{"property":"article:modified_time","content":"2025-10-10T04:50:50.000Z"}]]},"git":{"createdTime":1758874804000,"updatedTime":1760071850000},"autoDesc":true,"filePathRelative":"tech/20230512131310.md","headers":[]}');export{d as comp,r as data};
